<!DOCTYPE html>
<html>
    <head>NFC Reader</head>
    <body>
        <input type="button" value="Read" id="readbutton">
        <t id="output">output</t>
        <br>
        <t id="outputr">output</t>
        <br>
        <t id="output1">output</t>
        <br>
        <t id="output2">output</t>
        <br>
        <t id="output3">output</t>
    </body>
    <script>
        const reader = new NDEFReader();
        let but=document.getElementById("readbutton");
        but.addEventListener("click", async function(){
            console.log("click");
            try{
                await reader.scan();
                reader.addEventListener("readingerror", function(){
                    alert("Error reading");
                });
                reader.addEventListener("reading", function({message, serialNumber}){
                    document.getElementById("output").textContent=serialNumber;
                    document.getElementById("outputr").textContent=message.records.data;
                    document.getElementById("output1").textContent=message.records.getPayload();
                    document.getElementById("output2").textContent=message.records.toRecords();
                    const decoder=new TextDecoder(message.record.encoding);
                    document.getElementById("output3").textContent=decoder.decode(message.records.data);
                });
                
            } catch (error){
                alert("Error reading");
            }
        });
    </script>
</html>